window.__require=function e(t,o,r){function n(s,c){if(!o[s]){if(!t[s]){var u=s.split("/");if(u=u[u.length-1],!t[u]){var l="function"==typeof __require&&__require;if(!c&&l)return l(u,!0);if(i)return i(u,!0);throw new Error("Cannot find module '"+s+"'")}s=u}var a=o[s]={exports:{}};t[s][0].call(a.exports,function(e){return n(t[s][1][e]||e)},a,a.exports,e,t,o,r)}return o[s].exports}for(var i="function"==typeof __require&&__require,s=0;s<r.length;s++)n(r[s]);return n}({BoardModel:[function(e,t,o){"use strict";cc._RF.push(t,"78a6a3i9h5JRpZ2udT2i97w","BoardModel"),Object.defineProperty(o,"__esModule",{value:!0}),o.BoardModel=void 0;var r=e("./TileModel"),n=e("./TileRandomizer"),i=function(){function e(e,t,o){void 0===o&&(o=new n.TileRandomizer),this._grid=[],this.superThreshold=5,this.allColors=[r.TileColor.Red,r.TileColor.Green,r.TileColor.Blue,r.TileColor.Yellow,r.TileColor.Purple],this.rows=e,this.cols=t,this.randomizer=o,this.initGrid()}return Object.defineProperty(e.prototype,"gridData",{get:function(){return this._grid},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"grid",{get:function(){return this._grid},enumerable:!1,configurable:!0}),e.prototype.getRow=function(e){return this._grid[e]},e.prototype.getColumn=function(e){return this._grid.map(function(t){return t[e]})},e.prototype.getAllTiles=function(){return this._grid.reduce(function(e,t){return e.concat(t)},[])},e.prototype.getTile=function(e,t){return e<0||e>=this.rows||t<0||t>=this.cols?null:this._grid[e][t]},e.prototype.getTilesInRadius=function(e,t,o){for(var r=[],n=e-o;n<=e+o;n++)for(var i=t-o;i<=t+o;i++){var s=this.getTile(n,i);s&&r.push(s)}return r},e.prototype.swapTiles=function(e,t,o,r){var n=this._grid[e][t],i=this._grid[o][r];this._grid[e][t]=i,this._grid[o][r]=n,n&&(n.row=o,n.col=r),i&&(i.row=e,i.col=t)},e.prototype.initGrid=function(){this._grid=[];for(var e=0;e<this.rows;e++){this._grid[e]=[];for(var t=0;t<this.cols;t++)this._grid[e][t]=this.createTile(e,t)}},e.prototype.createTile=function(e,t){var o=new Set;if(t>=2){var n=this._grid[e][t-1],i=this._grid[e][t-2];n&&i&&n.color===i.color&&o.add(n.color)}if(e>=2){var s=this._grid[e-1][t],c=this._grid[e-2][t];s&&c&&s.color===c.color&&o.add(s.color)}var u=this.allColors.filter(function(e){return!o.has(e)}),l=this.randomizer.randomColor(u);return new r.TileModel(e,t,l)},e.prototype.findGroup=function(e){if(!e)return[];for(var t=new Set,o=[],r=[e],n=e.color;r.length;){var i=r.pop(),s=i.row+","+i.col;if(!t.has(s)){t.add(s),o.push(i);for(var c=0,u=[[1,0],[-1,0],[0,1],[0,-1]];c<u.length;c++){var l=u[c],a=l[0],p=l[1],d=i.row+a,f=i.col+p;if(d>=0&&d<this.rows&&f>=0&&f<this.cols){var h=this._grid[d][f];h&&h.color===n&&!t.has(d+","+f)&&r.push(h)}}}}return o},e.prototype.removeGroup=function(e,t){void 0===t&&(t=!0),this.removeTiles(e);var o=null;return t&&e.length>=this.superThreshold&&(o=this.insertSuperTile(e[0])),{moved:this.dropTiles(),created:this.fillEmpty(),superTile:o}},e.prototype.removeTiles=function(e){for(var t=0,o=e;t<o.length;t++){var r=o[t];this._grid[r.row][r.col]=null}},e.prototype.insertSuperTile=function(e){var t=this.randomSuperType(),o=new r.TileModel(e.row,e.col,e.color,t);return this._grid[e.row][e.col]=o,o},e.prototype.dropTiles=function(){for(var e=[],t=0;t<this.cols;t++){for(var o=this.rows-1,r=this.rows-1;r>=0;r--){var n=this._grid[r][t];n&&(o!==r&&e.push({from:{r:r,c:t},to:{r:o,c:t}}),this._grid[o][t]=n,n.row=o,n.col=t,o--)}for(r=o;r>=0;r--)this._grid[r][t]=null}return e},e.prototype.fillEmpty=function(){for(var e=[],t=0;t<this.cols;t++)for(var o=0;o<this.rows;o++)if(!this._grid[o][t]){var r=this.createTile(o,t);this._grid[o][t]=r,e.push({row:o,col:t,color:r.color})}return e},e.prototype.randomSuperType=function(){return this.randomizer.randomSuperType()},e.prototype.generateSuperType=function(){return this.randomSuperType()},e.prototype.hasMoves=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.cols;t++)if(this.findGroup(this._grid[e][t]).length>1)return!0;return!1},e.prototype.shuffle=function(){for(var e,t=this._grid.reduce(function(e,t){return e.concat(t)},[]),o=t.length-1;o>0;o--){var r=Math.floor(Math.random()*(o+1));e=[t[r].color,t[o].color],t[o].color=e[0],t[r].color=e[1]}for(var n=0;n<t.length;n++){var i=Math.floor(n/this.cols),s=n%this.cols;t[n].row=i,t[n].col=s,this._grid[i][s]=t[n]}},e}();o.BoardModel=i,cc._RF.pop()},{"./TileModel":"TileModel","./TileRandomizer":"TileRandomizer"}],BoosterType:[function(e,t,o){"use strict";cc._RF.push(t,"a5f3edsrVpCuIS4a/QI2m23","BoosterType"),Object.defineProperty(o,"__esModule",{value:!0}),o.BoosterType=void 0,function(e){e.Bomb="bomb",e.Teleport="teleport"}(o.BoosterType||(o.BoosterType={})),cc._RF.pop()},{}],Boosters:[function(e,t,o){"use strict";cc._RF.push(t,"a26fc9zZmZP8LWNwWuD81vZ","Boosters"),Object.defineProperty(o,"__esModule",{value:!0}),o.TeleportBooster=o.BombBooster=void 0;var r=function(){function e(e,t){void 0===t&&(t=3),this.radius=e,this._count=t}return Object.defineProperty(e.prototype,"blastRadius",{get:function(){return this.radius},enumerable:!1,configurable:!0}),e.prototype.use=function(e,t,o){return this._count<=0?[]:e.getTilesInRadius(t,o,this.radius)},e.prototype.decrement=function(){this._count>0&&this._count--},Object.defineProperty(e.prototype,"count",{get:function(){return this._count},enumerable:!1,configurable:!0}),e}();o.BombBooster=r;var n=function(){function e(e){void 0===e&&(e=5),this._count=e}return e.prototype.use=function(e,t,o,r,n){if(this._count<=0)return[];var i=e.getTile(t,o),s=e.getTile(r,n);return i&&s?(e.swapTiles(t,o,r,n),[]):[]},e.prototype.decrement=function(){this._count>0&&this._count--},Object.defineProperty(e.prototype,"count",{get:function(){return this._count},enumerable:!1,configurable:!0}),e}();o.TeleportBooster=n,cc._RF.pop()},{}],ButtonActiveEffect:[function(e,t,o){"use strict";cc._RF.push(t,"b82f9Jq4vJKR4slQ/JBK8Pe","ButtonActiveEffect");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,r){var n,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,r);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(s=(i<3?n(s):i>3?n(t,o,s):n(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,c=s.ccclass,u=s.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.scaleFactor=1.1,t.duration=.4,t}return n(t,e),t.prototype.onEnable=function(){this.startTween()},t.prototype.onDisable=function(){this.stopTween()},t.prototype.startTween=function(){this.tween=cc.tween(this.node).repeatForever(cc.tween().to(this.duration,{scale:this.scaleFactor}).to(this.duration,{scale:1})).start()},t.prototype.stopTween=function(){this.tween&&(this.tween.stop(),this.node.scale=1,this.tween=void 0)},i([u],t.prototype,"scaleFactor",void 0),i([u],t.prototype,"duration",void 0),i([c],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],ButtonHoverEffect:[function(e,t,o){"use strict";cc._RF.push(t,"0d810/uvoJM3pd/MvIQyAYh","ButtonHoverEffect");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,r){var n,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,r);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(s=(i<3?n(s):i>3?n(t,o,s):n(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,c=s.ccclass,u=s.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.offsetY=5,t.duration=.1,t.baseY=0,t}return n(t,e),t.prototype.onLoad=function(){this.baseY=this.node.y,this.node.on(cc.Node.EventType.MOUSE_ENTER,this.onEnter,this),this.node.on(cc.Node.EventType.MOUSE_LEAVE,this.onLeave,this)},t.prototype.onDestroy=function(){this.node.off(cc.Node.EventType.MOUSE_ENTER,this.onEnter,this),this.node.off(cc.Node.EventType.MOUSE_LEAVE,this.onLeave,this)},t.prototype.onEnter=function(){cc.tween(this.node).to(this.duration,{y:this.baseY+this.offsetY,opacity:200}).start()},t.prototype.onLeave=function(){cc.tween(this.node).to(this.duration,{y:this.baseY,opacity:255}).start()},i([u(cc.Integer)],t.prototype,"offsetY",void 0),i([u],t.prototype,"duration",void 0),i([c],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],ClickOutcome:[function(e,t,o){"use strict";cc._RF.push(t,"ff8d1OnVZlHBIgbsYyLJThY","ClickOutcome"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],ClickProcessor:[function(e,t,o){"use strict";cc._RF.push(t,"3eedbhSqpNACKIdFZm1B8TB","ClickProcessor"),Object.defineProperty(o,"__esModule",{value:!0}),o.ClickProcessor=void 0;var r=e("./BoosterType"),n=function(){function e(e,t,o,r){this.board=e,this.bomb=t,this.teleport=o,this.superFactory=r}return e.prototype.calcPoints=function(e){return 10*e+5*(e-2)},e.prototype.process=function(e,t,o,n,i){var s;void 0===o&&(o=null);var c=[],u=null,l=this.board.getTile(e,t);if(!l)return{result:{removed:[],moved:[],created:[],super:null},scoreDelta:0,consumeMove:!1};if(o===r.BoosterType.Teleport&&null!=n&&null!=i)return this.handleTeleport(e,t,n,i);if(o===r.BoosterType.Bomb?c=this.handleBomb(e,t):(s=this.collectTiles(l),c=s.tiles,u=s.trigger),c.length<=1)return{result:{removed:[],moved:[],created:[],super:null,triggerType:u},scoreDelta:0,consumeMove:!1};var a=c.filter(function(e){return null!=e}).map(function(e){return{row:e.row,col:e.col}}),p=c.every(function(e){return e.color===c[0].color}),d=!o&&!l.isSuper&&p&&c.length>=this.board.superThreshold,f=this.board.removeGroup(c,d),h=f.moved,y=f.created,m=f.superTile,v=this.calcPoints(c.length);return{result:{removed:a,moved:h,created:y,super:m?{row:m.row,col:m.col,type:m.superType}:null,triggerType:u},scoreDelta:v,consumeMove:!0}},e.prototype.handleTeleport=function(e,t,o,r){return e===o&&1===Math.abs(t-r)||t===r&&1===Math.abs(e-o)?(this.teleport.use(this.board,e,t,o,r),this.teleport.decrement(),{result:{removed:[],moved:[{from:{r:e,c:t},to:{r:o,c:r}},{from:{r:o,c:r},to:{r:e,c:t}}],created:[],super:null},scoreDelta:0,consumeMove:!0}):{result:{removed:[],moved:[],created:[],super:null},scoreDelta:0,consumeMove:!1}},e.prototype.handleBomb=function(e,t){var o=this.bomb.use(this.board,e,t);return this.bomb.decrement(),o},e.prototype.collectTiles=function(e){return e.isSuper?{tiles:this.activateSuper(e).filter(function(e){return null!=e}),trigger:e.superType}:{tiles:this.board.findGroup(e),trigger:null}},e.prototype.activateSuper=function(e){var t=this.superFactory.getHandler(e.superType).collect(this.board,e);return Array.from(new Set(t))},e}();o.ClickProcessor=n,cc._RF.pop()},{"./BoosterType":"BoosterType"}],ClickResult:[function(e,t,o){"use strict";cc._RF.push(t,"7cb7eRQW9JJzbf59pkIUPV2","ClickResult"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],GameController:[function(e,t,o){"use strict";cc._RF.push(t,"41f1cS7VmdPP5Hi0K0eTRH1","GameController");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,r){var n,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,r);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(s=(i<3?n(s):i>3?n(t,o,s):n(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s},s=this&&this.__awaiter||function(e,t,o,r){return new(o||(o=Promise))(function(n,i){function s(e){try{u(r.next(e))}catch(t){i(t)}}function c(e){try{u(r.throw(e))}catch(t){i(t)}}function u(e){var t;e.done?n(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(s,c)}u((r=r.apply(e,t||[])).next())})},c=this&&this.__generator||function(e,t){var o,r,n,i,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(e){return function(t){return u([e,t])}}function u(i){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,r&&(n=2&i[0]?r.return:i[0]?r.throw||((n=r.return)&&n.call(r),0):r.next)&&!(n=n.call(r,i[1])).done)return n;switch(r=0,n&&(i=[2&i[0],n.value]),i[0]){case 0:case 1:n=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(n=(n=s.trys).length>0&&n[n.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!n||i[1]>n[0]&&i[1]<n[3])){s.label=i[1];break}if(6===i[0]&&s.label<n[1]){s.label=n[1],n=i;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(i);break}n[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(c){i=[6,c],r=0}finally{o=n=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var u=e("./GridView"),l=e("../models/GameFactory"),a=e("../models/BoosterType"),p=e("./UIManager"),d=cc._decorator,f=d.ccclass,h=d.property,y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.useBooster=null,t.teleportFrom=null,t.gameFactory=new l.GameFactory,t.gameOver=!1,t.tileSize=130,t.tileGap=2,t}return n(t,e),t.prototype.setGameFactory=function(e){this.gameFactory=e},t.prototype.onLoad=function(){var e=this;this.uiManager=new p.default(this.popupContainer,this.winPopup,this.losePopup,this.customPopup,this.movesInput,this.scoreInput,this.startCustomBtn,this.bombButton,this.teleportButton,this.shuffleButton,this.scoreLabel,this.movesLabel,this.countBombLabel,this.countTeleportLabel,this.countShuffleLabel,function(t,o,r,n){return e._restartGame(t,o,r,n)},function(t){e.useBooster===t?(e.useBooster=null,e.teleportFrom=null):(e.useBooster=t,t===a.BoosterType.Teleport&&(e.teleportFrom=null)),e.uiManager.updateUI(e.model,e.useBooster)},function(){return e.onShuffle()}),this.uiManager.init()},t.prototype.start=function(){this._restartGame(10,10,20,500)},t.prototype._restartGame=function(e,t,o,r){this.uiManager.hideAllPopups(),this.gameOver=!1,this.model=this.gameFactory.create(e,t,o,r),this.gridView=new u.GridView(this.gridNode,this.tilePrefab,this.tileSize,this.tileGap),this.gridView.render(this.model,this.onTileClicked.bind(this)),this.uiManager.updateUI(this.model,this.useBooster)},t.prototype.onTileClicked=function(e,t){return s(this,void 0,void 0,function(){return c(this,function(o){switch(o.label){case 0:return this.gameOver?[2]:this.useBooster!==a.BoosterType.Teleport?[3,2]:[4,this.handleTeleportClick(e,t)];case 1:return o.sent(),[2];case 2:return[4,this.handleRegularClick(e,t)];case 3:return o.sent(),[2]}})})},t.prototype.handleTeleportClick=function(e,t){return s(this,void 0,void 0,function(){var o,r,n,i;return c(this,function(s){switch(s.label){case 0:return this.teleportFrom?(o=this.teleportFrom,r=o[0],n=o[1],0===(i=this.model.click(e,t,a.BoosterType.Teleport,r,n)).moved.length?(this.teleportFrom=null,this.useBooster=null,this.uiManager.updateUI(this.model,this.useBooster),[2]):[4,this.gridView.animateSwap(i.moved,this.model)]):(this.teleportFrom=[e,t],this.uiManager.updateUI(this.model,this.useBooster),[2]);case 1:return s.sent(),this.gridView.render(this.model,this.onTileClicked.bind(this)),this.teleportFrom=null,this.useBooster=null,this.uiManager.updateUI(this.model,this.useBooster),[2]}})})},t.prototype.handleRegularClick=function(e,t){return s(this,void 0,void 0,function(){var o,r;return c(this,function(n){switch(n.label){case 0:return o=this.useBooster,r=this.model.click(e,t,this.useBooster),this.useBooster=null,this.teleportFrom=null,[4,this.gridView.animateResult(r,this.model,this.onTileClicked.bind(this),e,t,o)];case 1:return n.sent(),this.uiManager.updateUI(this.model,this.useBooster),this.model.score>=this.model.targetScore?(this.uiManager.showPopup(this.winPopup),this.gameOver=!0):this.model.movesLeft<=0&&(this.uiManager.showPopup(this.losePopup),this.gameOver=!0),[2]}})})},t.prototype.onShuffle=function(){this.model.manualShuffle()&&this.gridView.render(this.model,this.onTileClicked.bind(this)),this.uiManager.updateUI(this.model,this.useBooster)},i([h(cc.Prefab)],t.prototype,"tilePrefab",void 0),i([h(cc.Node)],t.prototype,"gridNode",void 0),i([h(cc.Label)],t.prototype,"scoreLabel",void 0),i([h(cc.Label)],t.prototype,"movesLabel",void 0),i([h(cc.Node)],t.prototype,"popupContainer",void 0),i([h(cc.Node)],t.prototype,"winPopup",void 0),i([h(cc.Node)],t.prototype,"losePopup",void 0),i([h(cc.Node)],t.prototype,"customPopup",void 0),i([h(cc.EditBox)],t.prototype,"movesInput",void 0),i([h(cc.EditBox)],t.prototype,"scoreInput",void 0),i([h(cc.Button)],t.prototype,"startCustomBtn",void 0),i([h(cc.Button)],t.prototype,"bombButton",void 0),i([h(cc.Button)],t.prototype,"teleportButton",void 0),i([h(cc.Button)],t.prototype,"shuffleButton",void 0),i([h(cc.Label)],t.prototype,"countBombLabel",void 0),i([h(cc.Label)],t.prototype,"countTeleportLabel",void 0),i([h(cc.Label)],t.prototype,"countShuffleLabel",void 0),i([f],t)}(cc.Component);o.default=y,cc._RF.pop()},{"../models/BoosterType":"BoosterType","../models/GameFactory":"GameFactory","./GridView":"GridView","./UIManager":"UIManager"}],GameFactory:[function(e,t,o){"use strict";cc._RF.push(t,"973171qEElGwp53BgwXhU76","GameFactory"),Object.defineProperty(o,"__esModule",{value:!0}),o.GameFactory=void 0;var r=e("./GameModel"),n=e("./BoardModel"),i=e("./Boosters"),s=e("./SuperHandlers"),c=e("./ClickProcessor"),u=e("./TileRandomizer"),l=function(){function e(e,t,o,r,s){void 0===e&&(e=function(e,t,o){return new n.BoardModel(e,t,o)}),void 0===t&&(t=function(){return new i.BombBooster(1)}),void 0===o&&(o=function(){return new i.TeleportBooster}),void 0===r&&(r=function(e,t,o,r){return new c.ClickProcessor(e,t,o,r)}),void 0===s&&(s=new u.TileRandomizer),this.boardFactory=e,this.bombFactory=t,this.teleportFactory=o,this.processorFactory=r,this.randomizer=s}return e.prototype.create=function(e,t,o,n){var i=this.boardFactory(e,t,this.randomizer),c=this.bombFactory(),u=this.teleportFactory(),l=new s.SuperHandlerFactory(c.blastRadius),a=this.processorFactory(i,c,u,l);return new r.GameModel(i,o,n,a,c,u)},e}();o.GameFactory=l,cc._RF.pop()},{"./BoardModel":"BoardModel","./Boosters":"Boosters","./ClickProcessor":"ClickProcessor","./GameModel":"GameModel","./SuperHandlers":"SuperHandlers","./TileRandomizer":"TileRandomizer"}],GameModel:[function(e,t,o){"use strict";cc._RF.push(t,"6a9d1SpoCJGDqPcMJj3YiRX","GameModel"),Object.defineProperty(o,"__esModule",{value:!0}),o.GameModel=void 0;var r=function(){function e(e,t,o,r,n,i){this.score=0,this.shuffleCount=0,this.maxShuffles=3,this.outOfMoves=!1,this.board=e,this.movesLeft=t,this.targetScore=o,this.clickProcessor=r,this.bomb=n,this.teleport=i}return Object.defineProperty(e.prototype,"bombCount",{get:function(){return this.bomb.count},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"teleportCount",{get:function(){return this.teleport.count},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shuffleLeft",{get:function(){return Math.max(this.maxShuffles-this.shuffleCount,0)},enumerable:!1,configurable:!0}),e.prototype.canShuffle=function(){return this.shuffleLeft>0},e.prototype.manualShuffle=function(){return!!this.canShuffle()&&(this.board.shuffle(),this.shuffleCount++,!0)},e.prototype.click=function(e,t,o,r,n){if(void 0===o&&(o=null),this.movesLeft<=0)return{removed:[],moved:[],created:[],super:null};var i=this.clickProcessor.process(e,t,o,r,n);if(i.consumeMove&&(this.movesLeft-=1,this.score+=i.scoreDelta),this.score>=this.targetScore);else if(!this.board.hasMoves()){for(;this.shuffleCount<this.maxShuffles&&!this.board.hasMoves();)this.board.shuffle(),this.shuffleCount++;this.board.hasMoves()||(this.outOfMoves=!0)}return i.result},e}();o.GameModel=r,cc._RF.pop()},{}],GridView:[function(e,t,o){"use strict";cc._RF.push(t,"c1ffes0nnVDj4JtvXD1+Ntn","GridView");var r=this&&this.__awaiter||function(e,t,o,r){return new(o||(o=Promise))(function(n,i){function s(e){try{u(r.next(e))}catch(t){i(t)}}function c(e){try{u(r.throw(e))}catch(t){i(t)}}function u(e){var t;e.done?n(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(s,c)}u((r=r.apply(e,t||[])).next())})},n=this&&this.__generator||function(e,t){var o,r,n,i,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(e){return function(t){return u([e,t])}}function u(i){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,r&&(n=2&i[0]?r.return:i[0]?r.throw||((n=r.return)&&n.call(r),0):r.next)&&!(n=n.call(r,i[1])).done)return n;switch(r=0,n&&(i=[2&i[0],n.value]),i[0]){case 0:case 1:n=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(n=(n=s.trys).length>0&&n[n.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!n||i[1]>n[0]&&i[1]<n[3])){s.label=i[1];break}if(6===i[0]&&s.label<n[1]){s.label=n[1],n=i;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(i);break}n[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(c){i=[6,c],r=0}finally{o=n=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.GridView=void 0;var i=e("../models/TileModel"),s=e("../models/BoosterType"),c=function(){function e(e,t,o,r){this.gridNode=e,this.tilePrefab=t,this.tileSize=o,this.tileGap=r}return e.prototype.spawnTrail=function(e,t){if(t){var o=cc.instantiate(t);o.setPosition(e.getPosition()),this.gridNode.addChild(o),cc.tween(o).to(.4,{opacity:0,scale:.5},{easing:cc.easing.quadOut}).call(function(){return o.destroy()}).start()}},e.prototype.spawnExplosion=function(e,t){if(t&&t.explosionPrefab){var o=e.getPosition().add(new cc.Vec2(t.explosionOffset.x,t.explosionOffset.y)),r=cc.instantiate(t.explosionPrefab);r.setPosition(o.x,o.y),this.gridNode.addChild(r),cc.tween(r).to(.5,{opacity:0}).call(function(){return r.destroy()}).start()}},e.prototype.render=function(e,t){this.gridNode.removeAllChildren();for(var o=0,r=e.board.gridData;o<r.length;o++)for(var n=0,i=r[o];n<i.length;n++){var s=i[n];if(s){var c=cc.instantiate(this.tilePrefab);c.name="tile_"+s.row+"_"+s.col,c.setPosition(this.toPosition(e,s.col,s.row)),c.getComponent("TileView").init(s,t),this.gridNode.addChild(c)}}},e.prototype.animateSwap=function(e,t){return r(this,void 0,Promise,function(){var o=this;return n(this,function(r){switch(r.label){case 0:return[4,Promise.all(e.map(function(e){var r=o.gridNode.getChildByName("tile_"+e.from.r+"_"+e.from.c);return new Promise(function(n){cc.tween(r).to(.2,{position:o.toPosition(t,e.to.c,e.to.r)},{easing:cc.easing.sineInOut}).call(function(){return n()}).start()})}))];case 1:return r.sent(),[2]}})})},e.prototype.animateResult=function(e,t,o,i,s,c){return r(this,void 0,Promise,function(){var r,u;return n(this,function(n){switch(n.label){case 0:return r=e.triggerType,[4,this.playTriggerEffects(r,e,t,i,s)];case 1:return u=n.sent(),[4,this.animateSuperTileRemoval(e)];case 2:return n.sent(),[4,this.animateRemovedTiles(e,u,c,r)];case 3:return n.sent(),[4,this.animateMovedTiles(e,t)];case 4:return n.sent(),[4,this.animateCreatedTiles(e,t,o)];case 5:return n.sent(),this.render(t,o),[2]}})})},e.prototype.playTriggerEffects=function(e,t,o,s,c){return r(this,void 0,Promise,function(){var r,u,l,a,p,d,f,h,y,m,v,b,w,g,_,T,P,B,C,R,M,F,S,O,k,I=this;return n(this,function(n){switch(n.label){case 0:if(r=[],u=new Set,null==e||null==s||null==c)return[3,4];if(l=this.gridNode.getChildByName("tile_"+s+"_"+c),a=l?l.getComponent("TileView"):null,!l||!a)return[3,4];if(p=this.toPosition(o,c,s),e!==i.SuperType.Row||!a.rocketRowPrefab)return[3,1];for(p.x+=a.rocketRowOffset.x,p.y+=a.rocketRowOffset.y,d=cc.instantiate(a.rocketRowPrefab),f=cc.instantiate(a.rocketRowPrefab),d.setPosition(p),f.setPosition(p),this.gridNode.addChild(d),this.gridNode.addChild(f),T=Math.max(c,o.board.cols-1-c)||1,h=.3/T,y=function(e,t){if(e===s){u.add(e+"_"+t);var o=m.gridNode.getChildByName("tile_"+e+"_"+t);o&&r.push(new Promise(function(e){cc.tween(o).delay(Math.abs(t-c)*h).call(function(){return I.spawnExplosion(o,o.getComponent("TileView"))}).to(.2,{scale:0,opacity:0},{easing:cc.easing.quadIn}).call(function(){o.destroy(),e()}).start()}))}},m=this,v=0,b=t.removed;v<b.length;v++)w=b[v],S=w.row,O=w.col,y(S,O);return r.push(new Promise(function(e){cc.tween(d).to(.3,{position:I.toPosition(o,0,s).add(new cc.Vec3(a.rocketRowOffset.x,a.rocketRowOffset.y,0))},{onUpdate:function(){return I.spawnTrail(d,a.rocketTrailPrefab)}}).call(function(){d.destroy(),e()}).start()})),r.push(new Promise(function(e){cc.tween(f).to(.3,{position:I.toPosition(o,o.board.cols-1,s).add(new cc.Vec3(a.rocketRowOffset.x,a.rocketRowOffset.y,0))},{onUpdate:function(){return I.spawnTrail(f,a.rocketTrailPrefab)}}).call(function(){f.destroy(),e()}).start()})),[3,4];case 1:if(e!==i.SuperType.Column||!a.rocketColumnPrefab)return[3,2];for(p.x+=a.rocketColumnOffset.x,p.y+=a.rocketColumnOffset.y,g=cc.instantiate(a.rocketColumnPrefab),_=cc.instantiate(a.rocketColumnPrefab),g.setPosition(p),_.setPosition(p),this.gridNode.addChild(g),this.gridNode.addChild(_),T=Math.max(s,o.board.rows-1-s)||1,P=.3/T,B=function(e,t){if(t===c){u.add(e+"_"+t);var o=C.gridNode.getChildByName("tile_"+e+"_"+t);o&&r.push(new Promise(function(t){cc.tween(o).delay(Math.abs(e-s)*P).call(function(){return I.spawnExplosion(o,o.getComponent("TileView"))}).to(.2,{scale:0,opacity:0},{easing:cc.easing.quadIn}).call(function(){o.destroy(),t()}).start()}))}},C=this,R=0,M=t.removed;R<M.length;R++)F=M[R],S=F.row,O=F.col,B(S,O);return r.push(new Promise(function(e){cc.tween(g).to(.3,{position:I.toPosition(o,c,0).add(new cc.Vec3(a.rocketColumnOffset.x,a.rocketColumnOffset.y,0))},{onUpdate:function(){return I.spawnTrail(g,a.rocketTrailPrefab)}}).call(function(){g.destroy(),e()}).start()})),r.push(new Promise(function(e){cc.tween(_).to(.3,{position:I.toPosition(o,c,o.board.rows-1).add(new cc.Vec3(a.rocketColumnOffset.x,a.rocketColumnOffset.y,0))},{onUpdate:function(){return I.spawnTrail(_,a.rocketTrailPrefab)}}).call(function(){_.destroy(),e()}).start()})),[3,4];case 2:return e!==i.SuperType.Radius&&e!==i.SuperType.Full||!a.explosionPrefab?[3,4]:(p.x+=a.explosionOffset.x,p.y+=a.explosionOffset.y,(k=cc.instantiate(a.explosionPrefab)).setPosition(p),this.gridNode.addChild(k),[4,new Promise(function(e){cc.tween(k).to(.5,{opacity:0}).call(function(){k.destroy(),e()}).start()})]);case 3:n.sent(),n.label=4;case 4:return[4,Promise.all(r)];case 5:return n.sent(),[2,u]}})})},e.prototype.animateSuperTileRemoval=function(e){return r(this,void 0,void 0,function(){var t,o,r,i;return n(this,function(n){switch(n.label){case 0:return e.super&&e.removed.some(function(t){return t.row===e.super.row&&t.col===e.super.col})?(t=e.super,o=t.row,r=t.col,(i=this.gridNode.getChildByName("tile_"+o+"_"+r))?[4,new Promise(function(e){cc.tween(i).to(.18,{scale:.1,opacity:0},{easing:cc.easing.cubicIn}).call(function(){i.destroy(),e()}).start()})]:[3,2]):[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}})})},e.prototype.animateRemovedTiles=function(e,t,o,i){return r(this,void 0,void 0,function(){var r=this;return n(this,function(n){switch(n.label){case 0:return[4,Promise.all(e.removed.map(function(e){var n=e.row,c=e.col;if(t.has(n+"_"+c))return Promise.resolve();var u=r.gridNode.getChildByName("tile_"+n+"_"+c);return u?new Promise(function(e){cc.tween(u).call(function(){o!==s.BoosterType.Bomb&&null==i||r.spawnExplosion(u,u.getComponent("TileView"))}).to(.2,{scale:0,opacity:0},{easing:cc.easing.quadIn}).call(function(){u.destroy(),e()}).start()}):Promise.resolve()}))];case 1:return n.sent(),[2]}})})},e.prototype.animateMovedTiles=function(e,t){return r(this,void 0,void 0,function(){var o=this;return n(this,function(r){switch(r.label){case 0:return[4,Promise.all(e.moved.map(function(e){var r=o.gridNode.getChildByName("tile_"+e.from.r+"_"+e.from.c);return r?(r.name="tile_"+e.to.r+"_"+e.to.c,new Promise(function(n){cc.tween(r).to(.3,{position:o.toPosition(t,e.to.c,e.to.r)},{easing:cc.easing.quadOut}).call(function(){return n()}).start()})):Promise.resolve()}))];case 1:return r.sent(),[2]}})})},e.prototype.animateCreatedTiles=function(e,t,o){return r(this,void 0,void 0,function(){var r=this;return n(this,function(n){switch(n.label){case 0:return[4,Promise.all(e.created.map(function(e){var n=cc.instantiate(r.tilePrefab);n.name="tile_"+e.row+"_"+e.col;var i=r.toPosition(t,e.col,-1);n.setPosition(new cc.Vec3(i.x,i.y+r.tileSize,0));var s=t.board.gridData[e.row][e.col];return n.getComponent("TileView").init(s,o),r.gridNode.addChild(n),new Promise(function(o){cc.tween(n).to(.3,{position:r.toPosition(t,e.col,e.row)},{easing:cc.easing.backOut}).call(function(){return o()}).start()})}))];case 1:return n.sent(),[2]}})})},e.prototype.toPosition=function(e,t,o){var r=this.tileSize+this.tileGap,n=r*e.board.cols,i=r*e.board.rows;return new cc.Vec3(t*r-n/2+this.tileSize/2,i/2-o*r-this.tileSize/2,0)},e}();o.GridView=c,cc._RF.pop()},{"../models/BoosterType":"BoosterType","../models/TileModel":"TileModel"}],IBoardModel:[function(e,t,o){"use strict";cc._RF.push(t,"94654i5DjBHlYqqxtPoPqqL","IBoardModel"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],IBooster:[function(e,t,o){"use strict";cc._RF.push(t,"c9582ZUwGNBAbHaGds9ExdU","IBooster"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],IClickProcessor:[function(e,t,o){"use strict";cc._RF.push(t,"41fa5ARkJpMzZ4xwgNcGoVA","IClickProcessor"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],IGridView:[function(e,t,o){"use strict";cc._RF.push(t,"14e05T/LxJO0Y6hgs2UCJEs","IGridView"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],ISuperHandler:[function(e,t,o){"use strict";cc._RF.push(t,"ad72cp06Q1LKLwtfnn6mqEc","ISuperHandler"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],SuperHandlers:[function(e,t,o){"use strict";cc._RF.push(t,"aa198/DU+NP17K6pcYduP74","SuperHandlers"),Object.defineProperty(o,"__esModule",{value:!0}),o.SuperHandlerFactory=o.FullHandler=o.RadiusHandler=o.ColumnHandler=o.RowHandler=void 0;var r=e("./TileModel"),n=function(){function e(){}return e.prototype.collect=function(e,t){return e.getRow(t.row)},e}();o.RowHandler=n;var i=function(){function e(){}return e.prototype.collect=function(e,t){return e.getColumn(t.col)},e}();o.ColumnHandler=i;var s=function(){function e(e){void 0===e&&(e=1),this.radius=e}return e.prototype.collect=function(e,t){return e.getTilesInRadius(t.row,t.col,this.radius)},e}();o.RadiusHandler=s;var c=function(){function e(){}return e.prototype.collect=function(e){return e.getAllTiles()},e}();o.FullHandler=c;var u=function(){function e(e){void 0===e&&(e=1),this.radius=e}return e.prototype.getHandler=function(e){switch(e){case r.SuperType.Row:return new n;case r.SuperType.Column:return new i;case r.SuperType.Radius:return new s(this.radius);case r.SuperType.Full:return new c;default:return new n}},e}();o.SuperHandlerFactory=u,cc._RF.pop()},{"./TileModel":"TileModel"}],TileModel:[function(e,t,o){"use strict";var r;cc._RF.push(t,"b6b27P9vyNIhp+ta10ky+pL","TileModel"),Object.defineProperty(o,"__esModule",{value:!0}),o.TileModel=o.SuperType=o.TileColor=void 0,function(e){e[e.Red=0]="Red",e[e.Green=1]="Green",e[e.Blue=2]="Blue",e[e.Yellow=3]="Yellow",e[e.Purple=4]="Purple"}(o.TileColor||(o.TileColor={})),function(e){e[e.None=0]="None",e[e.Row=1]="Row",e[e.Column=2]="Column",e[e.Radius=3]="Radius",e[e.Full=4]="Full"}(r=o.SuperType||(o.SuperType={}));var n=function(){function e(e,t,o,n){void 0===n&&(n=r.None),this.row=e,this.col=t,this.color=o,this.superType=n}return Object.defineProperty(e.prototype,"isSuper",{get:function(){return this.superType!==r.None},enumerable:!1,configurable:!0}),e.ColorCount=5,e}();o.TileModel=n,cc._RF.pop()},{}],TileRandomizer:[function(e,t,o){"use strict";cc._RF.push(t,"f7236ftWIFMQbPqLkgPSSU4","TileRandomizer"),Object.defineProperty(o,"__esModule",{value:!0}),o.TileRandomizer=void 0;var r=e("./TileModel"),n=function(){function e(){}return e.prototype.randomColor=function(e){return e[Math.floor(Math.random()*e.length)]},e.prototype.randomSuperType=function(){for(var e=[r.SuperType.Row,r.SuperType.Column,r.SuperType.Radius,r.SuperType.Full],t=[.3,.3,.25,.15],o=0,n=Math.random(),i=0;i<e.length;i++)if(n<=(o+=t[i]))return e[i];return r.SuperType.Row},e}();o.TileRandomizer=n,cc._RF.pop()},{"./TileModel":"TileModel"}],TileView:[function(e,t,o){"use strict";cc._RF.push(t,"4bfec7oE95MrJSCFi8umlSK","TileView");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,r){var n,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,r);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(s=(i<3?n(s):i>3?n(t,o,s):n(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=e("../models/TileModel"),c=cc._decorator,u=c.ccclass,l=c.property,a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.sprite=null,t.frames=[],t.superRowFrame=null,t.superColumnFrame=null,t.superRadiusFrame=null,t.superFullFrame=null,t.rocketRowPrefab=null,t.rocketColumnPrefab=null,t.rocketTrailPrefab=null,t.explosionPrefab=null,t.rocketRowOffset=new cc.Vec2(0,0),t.rocketColumnOffset=new cc.Vec2(0,0),t.explosionOffset=new cc.Vec2(0,0),t}return n(t,e),t.prototype.init=function(e,t){this.model=e,this.clickCallback=t,this.updateView(),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this)},t.prototype.updateView=function(){this.model.isSuper?(this.sprite.spriteFrame=this.getSuperSpriteFrame(this.model.superType),cc.tween(this.node).set({scale:0}).to(.3,{scale:1.2},{easing:cc.easing.backOut}).start()):(this.sprite.spriteFrame=this.frames[this.model.color],this.node.setScale(1,1,1))},t.prototype.getSuperSpriteFrame=function(e){switch(e){case s.SuperType.Row:return this.superRowFrame;case s.SuperType.Column:return this.superColumnFrame;case s.SuperType.Radius:return this.superRadiusFrame;case s.SuperType.Full:return this.superFullFrame;default:return this.frames[this.model.color]}},t.prototype.onTouchEnd=function(){this.clickCallback(this.model.row,this.model.col)},i([l(cc.Sprite)],t.prototype,"sprite",void 0),i([l([cc.SpriteFrame])],t.prototype,"frames",void 0),i([l({type:cc.SpriteFrame})],t.prototype,"superRowFrame",void 0),i([l({type:cc.SpriteFrame})],t.prototype,"superColumnFrame",void 0),i([l({type:cc.SpriteFrame})],t.prototype,"superRadiusFrame",void 0),i([l({type:cc.SpriteFrame})],t.prototype,"superFullFrame",void 0),i([l(cc.Prefab)],t.prototype,"rocketRowPrefab",void 0),i([l(cc.Prefab)],t.prototype,"rocketColumnPrefab",void 0),i([l(cc.Prefab)],t.prototype,"rocketTrailPrefab",void 0),i([l(cc.Prefab)],t.prototype,"explosionPrefab",void 0),i([l(cc.Vec2)],t.prototype,"rocketRowOffset",void 0),i([l(cc.Vec2)],t.prototype,"rocketColumnOffset",void 0),i([l(cc.Vec2)],t.prototype,"explosionOffset",void 0),i([u],t)}(cc.Component);o.default=a,cc._RF.pop()},{"../models/TileModel":"TileModel"}],UIManager:[function(e,t,o){"use strict";cc._RF.push(t,"30abdwek69P7YCsxCyHLi9q","UIManager"),Object.defineProperty(o,"__esModule",{value:!0}),o.UIManager=void 0;var r=e("../models/BoosterType"),n=e("./ButtonHoverEffect"),i=e("./ButtonActiveEffect"),s=function(){function e(e,t,o,n,i,s,c,u,l,a,p,d,f,h,y,m,v,b){var w=this;this.popupContainer=e,this.winPopup=t,this.losePopup=o,this.customPopup=n,this.movesInput=i,this.scoreInput=s,this.startCustomBtn=c,this.bombButton=u,this.teleportButton=l,this.shuffleButton=a,this.scoreLabel=p,this.movesLabel=d,this.countBombLabel=f,this.countTeleportLabel=h,this.countShuffleLabel=y,this.restartGame=m,this.onBoosterSelect=v,this.onShuffle=b,this.onRestartDefault=function(){w.restartGame(10,10,20,500)},this.onShowCustom=function(){w.popupContainer.active=!0,w.winPopup.active=!1,w.losePopup.active=!1,w.customPopup.active=!0},this.onRestartCustom=function(){var e=w.movesInput.string.trim(),t=w.scoreInput.string.trim(),o=parseInt(e,10),r=parseInt(t,10);if(isNaN(o)||isNaN(r)||o<1||o>999||r<10||r>1e5)return cc.log("\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0435 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b! \u0425\u043e\u0434\u044b: 1-99, \u041e\u0447\u043a\u0438: 10-100000"),w.movesInput.node.color=cc.Color.RED,void(w.scoreInput.node.color=cc.Color.RED);w.movesInput.node.color=cc.Color.WHITE,w.scoreInput.node.color=cc.Color.WHITE,w.restartGame(10,10,o,r)},this.onBombButton=function(){w.onBoosterSelect(r.BoosterType.Bomb)},this.onTeleportButton=function(){w.onBoosterSelect(r.BoosterType.Teleport)},this.onShuffleButton=function(){w.onShuffle()}}return e.prototype.init=function(){var e=this;this.hideAllPopups(),[this.winPopup,this.losePopup].forEach(function(t){var o=t.getChildByName("RestartButtonTemplate");o&&o.getComponent(cc.Button).node.on("click",e.onRestartDefault,e);var r=t.getChildByName("ShowCustomBtn");r&&r.getComponent(cc.Button).node.on("click",e.onShowCustom,e)}),this.startCustomBtn.node.on("click",this.onRestartCustom,this),this.bombButton.node.on("click",this.onBombButton,this),this.teleportButton.node.on("click",this.onTeleportButton,this),this.shuffleButton.node.on("click",this.onShuffleButton,this),this.bombButton.node.addComponent(n.default),this.teleportButton.node.addComponent(n.default),this.shuffleButton.node.addComponent(n.default),this.bombButton.node.addComponent(i.default).enabled=!1,this.teleportButton.node.addComponent(i.default).enabled=!1},e.prototype.hideAllPopups=function(){this.popupContainer.active=!1,this.winPopup.active=!1,this.losePopup.active=!1,this.customPopup.active=!1},e.prototype.showPopup=function(e){this.popupContainer.active=!0,this.winPopup.active=!1,this.losePopup.active=!1,this.customPopup.active=!1,e.active=!0},e.prototype.updateUI=function(e,t){void 0===t&&(t=null),this.scoreLabel.string="\u041e\u0427\u041a\u0418: "+e.score+"/"+e.targetScore,this.movesLabel.string=""+e.movesLeft,this.countBombLabel.string=""+e.bomb.count,this.countTeleportLabel.string=""+e.teleport.count,this.countShuffleLabel.string="\u043f\u0435\u0440\u0435\u043c\u0435\u0448\u0430\u0442\u044c: "+e.shuffleLeft,this.bombButton.interactable=e.bomb.count>0,this.teleportButton.interactable=e.teleport.count>0,this.shuffleButton.interactable=e.canShuffle(),this.bombButton.node.opacity=t===r.BoosterType.Bomb?180:255,this.teleportButton.node.opacity=t===r.BoosterType.Teleport?180:255;var o=this.bombButton.node.getComponent(i.default),n=this.teleportButton.node.getComponent(i.default);o.enabled=t===r.BoosterType.Bomb,n.enabled=t===r.BoosterType.Teleport},e}();o.UIManager=s,o.default=s,cc._RF.pop()},{"../models/BoosterType":"BoosterType","./ButtonActiveEffect":"ButtonActiveEffect","./ButtonHoverEffect":"ButtonHoverEffect"}]},{},["BoardModel","BoosterType","Boosters","ClickOutcome","ClickProcessor","ClickResult","GameFactory","GameModel","IBoardModel","IBooster","IClickProcessor","ISuperHandler","SuperHandlers","TileModel","TileRandomizer","ButtonActiveEffect","ButtonHoverEffect","GameController","GridView","IGridView","TileView","UIManager"]);